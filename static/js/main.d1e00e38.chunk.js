(this["webpackJsonpshut-the-box"]=this["webpackJsonpshut-the-box"]||[]).push([[0],{17:function(e,a,t){e.exports=t(29)},22:function(e,a,t){},27:function(e,a,t){},28:function(e,a,t){},29:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(10),l=t.n(c),s=(t(22),t(15)),i=t(2),o=t(14),m=t(1),d=t(5),u=t.n(d),b=t(11),p=t(12),E=t(13),f=t(16),v=(t(27),function(e){Object(f.a)(t,e);var a=Object(E.a)(t);function t(e){var n;return Object(b.a)(this,t),(n=a.call(this,e)).state={diceClassToggler:!1},n}return Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){!0===e.needsToRoll&&!1===this.props.needsToRoll&&this.setState({diceClassToggler:!this.state.diceClassToggler})}},{key:"render",value:function(){var e=this.props.dice,a=this.state.diceClassToggler;return r.a.createElement("div",{className:"dice-bg"},r.a.createElement("div",{className:"dice"},e.map((function(e,t){return r.a.createElement("ol",{className:"die-list ".concat(g(a,t)?"even-roll":"odd-roll"),"data-roll":e,key:t},r.a.createElement("li",{className:"die-item","data-side":"1"},r.a.createElement("span",{className:"dot"})),r.a.createElement("li",{className:"die-item","data-side":"2"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})),r.a.createElement("li",{className:"die-item","data-side":"3"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})),r.a.createElement("li",{className:"die-item","data-side":"4"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})),r.a.createElement("li",{className:"die-item","data-side":"5"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})),r.a.createElement("li",{className:"die-item","data-side":"6"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})))}))))}}]),t}(r.a.Component)),g=function(e,a){return a%2===0?e:!e},h=t(6),N=function(e,a){return C(Object(i.a)(e))===a},O=Object(i.a)(Array(9).keys()).map((function(e){return e+1})),C=function(e){return e.reduce((function(e,a){return e+a}),0)},y=function(){return Math.ceil(6*Math.random())},k=function(e){return{dice:e||[],availableChoices:T(),pickingNumbers:!1,needsToRoll:!0,rolling:!1,selectedNumbers:new Set,gameOver:!1,winner:!1}},x=function(e,a){var t=e.gameOver,n=e.needsToRoll,r=e.availableChoices;if(t||!n)return e;var c=C(Object(i.a)(r))>6?[y(),y()]:[y()],l=!function e(a,t,n){if(t===n)return!0;if(t>n)return!1;for(var r=0;r<a.length;r++){var c=a.slice(0);if(c.splice(r,1),e(c,t+a[r],n))return!0}return!1}(Object(i.a)(r),0,C(c));return setTimeout((function(){return a({type:"FINISH_ROLL_DICE"})}),1500),{dice:c,availableChoices:r,pickingNumbers:!l,needsToRoll:!1,rolling:!0,selectedNumbers:new Set,gameOver:l,winner:!1}},w=function(e){return Object(h.a)({},e,{rolling:!1})},j=function(e,a){var t=e.gameOver,n=e.availableChoices,r=e.selectedNumbers,c=e.pickingNumbers;if(t||!n.has(a)||!c)return e;var l=new Set(r);return l[r.has(a)?"delete":"add"](a),Object(h.a)({},e,{selectedNumbers:l})},I=function(e){var a=e.gameOver,t=e.needsToRoll,n=e.availableChoices,r=e.selectedNumbers,c=e.pickingNumbers,l=e.dice;if(a||t||!c||!S(r,n)||!N(r,C(l)))return e;var s=new Set(n);r.forEach((function(e){return s.delete(e)}));var i=0===s.size;return{dice:e.dice,availableChoices:s,pickingNumbers:!1,needsToRoll:!0,selectedNumbers:new Set,gameOver:i,winner:i}},S=function(e,a){return Object(i.a)(e).every((function(e){return a.has(e)}))},T=function(){return new Set(Object(i.a)(Array(9).keys()).map((function(e){return e+1})))},L=function(e){var a=1===e.dice.length?e.dice.concat(y()):e.dice;return k(a)},R=function(e,a){switch(a.type){case"ROLL_DICE":return x(e,a.dispatch);case"FINISH_ROLL_DICE":return w(e);case"TOGGLE_CHOICE":return j(e,a.payload);case"FINALIZE_SELECTION":return I(e);case"NEW_GAME":return L(e);default:return e}},_=(t(28),function(){return r.a.createElement("div",{className:"pyro"},r.a.createElement("div",{className:"before"}),r.a.createElement("div",{className:"after"}))}),D=function(e){var a=e.winner,t=e.availableChoices,n=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Object(m.css)(W.gameOverContainer,W.gameOverOverlay)}),a&&r.a.createElement("div",{className:Object(m.css)(W.gameOverContainer)},r.a.createElement(_,null)),r.a.createElement("div",{className:Object(m.css)(W.gameOverContainer)},r.a.createElement("div",{className:Object(m.css)(W.gameOverTextContainer)},a?r.a.createElement("span",null,"You shut the box!!!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"nope"),r.a.createElement("span",null,Object(i.a)(t).join(" + "),t.size>1&&" = ".concat(C(Object(i.a)(t))))),r.a.createElement("button",{onClick:function(){return n({type:"NEW_GAME"})}},"Start new game"))))},A=function(e){var a=e.availableChoices,t=e.chosenNumbers,n=e.toggleChoice,c=e.disabled,l=e.gameOver;return r.a.createElement("div",{className:Object(m.css)(W.allNumbersContainer),style:{backgroundImage:"url(".concat(u.a,")")}},O.map((function(e){return r.a.createElement(G,{key:e,number:e,disabled:c||!a.has(e),selected:a.has(e)&&t.has(e),onClick:function(){!l&&n(e)}})})))},G=function(e){var a=e.number,t=e.disabled,n=e.selected,c=e.onClick;return r.a.createElement(H,{className:Object(m.css)(W.numberContainer,t&&W.numberDisabledOverlay,n&&W.numberSelected),onClick:function(){return!t&&c(a)}},r.a.createElement("div",{className:Object(m.css)(W.number,t&&W.numberDisabled)},a))},F=function(){var e=Object(n.useReducer)(R,[y(),y()],k),a=Object(o.a)(e,2),t=a[0],c=a[1],l=t.dice,s=t.availableChoices,i=t.pickingNumbers,d=t.needsToRoll,b=t.rolling,p=t.selectedNumbers,E=t.gameOver,f=t.winner;return function(e){Object(n.useEffect)((function(){var a=function(a){switch(a.key){case"r":e({type:"ROLL_DICE",dispatch:e});break;case"n":e({type:"NEW_GAME"});break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e({type:"TOGGLE_CHOICE",payload:parseInt(a.key)});break;case"f":e({type:"FINALIZE_SELECTION"})}};return window.addEventListener("keypress",a),function(){return window.removeEventListener("keypress",a)}}))}(c),r.a.createElement("div",{className:Object(m.css)(W.gameContainer)},r.a.createElement("div",{className:Object(m.css)(W.boxContainer),style:{backgroundImage:"url(".concat(u.a,")")}},r.a.createElement(A,{availableChoices:s,chosenNumbers:p,toggleChoice:function(e){return c({type:"TOGGLE_CHOICE",payload:e})},disabled:!(E||i),gameOver:E}),r.a.createElement("div",null,r.a.createElement("button",{disabled:!i||!N(p,C(l)),onClick:function(){return c({type:"FINALIZE_SELECTION"})}},"Select these numbers")),r.a.createElement("div",{className:Object(m.css)(W.diceSurface)},r.a.createElement(v,{dice:l,needsToRoll:d}),r.a.createElement("div",{className:Object(m.css)(W.actionsContainer)},!b&&d&&!E&&r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return c({type:"ROLL_DICE",dispatch:c})}},"Roll"))),!b&&E&&r.a.createElement(D,{availableChoices:s,winner:f,dispatch:c}))))},W=m.StyleSheet.create({gameContainer:{display:"flex",flexDirection:"column",height:"100vh"},boxContainer:{display:"flex",alignItems:"center",flexDirection:"column",flex:1,padding:"24px",paddingBottom:48,backgroundColor:"#571e00","@media only screen and (max-width: 479px)":{padding:"24px 0 48px"}},actionsContainer:{position:"absolute",top:0},diceSurface:{flex:1,width:"100%",backgroundImage:"none",backgroundColor:"#076324",position:"relative",paddingTop:48},gameOverOverlay:{backgroundColor:"black",opacity:.3},gameOverContainer:{position:"absolute",top:0,bottom:0,left:0,right:0,textAlign:"center",padding:24},gameOverTextContainer:{backgroundColor:"white",padding:8,display:"inline-flex",flexDirection:"column"},allNumbersContainer:{display:"flex",backgroundColor:"#5e4300",width:"100%",maxWidth:"960px",height:120,"@media only screen and (max-width: 479px)":{height:72}},numberContainer:{display:"flex",border:"solid black 2px",flex:1},numberSelected:{borderColor:"yellow"},number:{flex:1,fontSize:"32px",fontWeight:"bold",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center","@media only screen and (max-width: 479px)":{fontSize:"16px"}},numberDisabled:{color:"black"},numberDisabledOverlay:{cursor:"unset",opacity:.5,backgroundColor:"white"},numberSelectedOverlay:{}}),M=function(e,a){" "!==a.key&&"Enter"!==a.key||e(a)},H=function(e){var a=e.children,t=e.onClick,n=Object(s.a)(e,["children","onClick"]);return r.a.createElement("div",Object.assign({onKeyPress:M.bind(null,t),onClick:t,role:"button",tabIndex:"0"},n),a)};var z=function(){return r.a.createElement("div",null,r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,a,t){e.exports=t.p+"static/media/wood-pattern.02464a71.png"}},[[17,1,2]]]);
//# sourceMappingURL=main.d1e00e38.chunk.js.map